;更新日期：2024年12月31日
;--------------------------------------------------------
;K120_受孕可能
;判断是否可能受孕的getter方法。
;这意味着：未怀孕、在危险日允许无防护性行为且未使用避孕措施(也没有配备避孕套)。
;
;返回：若可能受孕则为真，否则为假。
;--------------------------------------------------------
@K120_INSEMINATION_POSSIBLE
#FUNCTION
RETURNF (!TALENT:妊娠 && CFLAG:生解禁 >= 2 && !TCVAR:口服避孕薬 && !TEQUIP:PLAYER:避孕套)


;--------------------------------------------------------
;K120_危险日判定
;判断当前是否为"危险日前"、"危险日"或"排卵期"的getter方法。
;
;返回：若在危险日(任意阶段)则为真，否则为假。
;--------------------------------------------------------
@K120_IS_DANGEROUS_DAYS
#FUNCTION
RETURNF (CFLAG:900 > 5 && CFLAG:900 < 9)

;--------------------------------------------------------
;K120_玩家即将射精
;判断玩家是否即将射精但当前未射精的getter方法。
;
;返回: 如果即将射精则返回True，否则返回False。
;--------------------------------------------------------
@K120_PLAYER_EJACULATION_IMMINENT
#FUNCTION
RETURNF (TCVAR:PLAYER:イきそう && !NOWEX:PLAYER:射精)

;--------------------------------------------------------
;K120_INSEMINATION_PLEA
;封装她想要体验内射快感的逻辑和对话的方法。
;注意: 适用于所有阴道性交调用的结尾处；如果适用/需要的话。
;      也包含玩家已经内射时的情况，此时她会乞求更多。
;
;以下是让她乞求内射所需的条件:
;- 爱情值
;- 可以内射(参见函数)
;- 处于危险期(参见函数)
;- 玩家即将高潮
;- 当前目标是阿吽(ID:120) - 通常应该都是这种情况，但这里会再次确认以防万一
;
;TODO: 她是否应该尝试强制内射，即在结束时通过描述文字强制玩家高潮？
;TODO: 如果启用，是否在更新/初次遭遇时添加开关选项以免让玩家措手不及？
;
;返回: void（仅输出对话）
;--------------------------------------------------------
@K120_INSEMINATION_PLEA
IF (TALENT:恋慕 && K120_INSEMINATION_POSSIBLE() && K120_IS_DANGEROUS_DAYS() && K120_PLAYER_EJACULATION_IMMINENT() && EX:TARGET:膣内精液 <= 0 && TARGET == 120)
    PRINTFORML 
    PRINTFORMDW Aunn %SPLIT_G(@"察觉到你即将高潮：感受到你阴茎%FSYN("脉动")%在她体内的动静：意识到你已到极限：预感到你即将%FSYN("射精")%")%。
    PRINTFORML 「%MOAN("嗯",,3)%... %CALLNAME:MASTER%-さん...!」
    PRINTFORMDW %SPLIT_G("瞳孔化作心形：吐出舌头：开始流涎：表情松弛：眼神失焦：全身发烫：声音颤抖：体内野兽苏醒：深层欲望浮现")%的同时，她因%SPLIT_G("受精：授精：受孕：怀胎：繁衍：生殖")%的%SPLIT_G("可能性：概率：机会：前景：几率：或然性")%而变得%SPLIT_G("如痴如醉：神魂颠倒：心驰神往：全神贯注：意乱情迷：执念深重：欣喜若狂：如饮醇醪")%。
    PRINTFORML 「%SPLIT_G(@"里面...！请全部%FSYN("注入")%进来！：今天...请务必射在里面！：拜托，今天请全部%FSYN("灌注")%进来！：今天是特别的日子，请射在里面好吗？：我的子宫...请填满它！：求求你...%FSYN("注入")%全部进来，就今天...：今天请不要拔出去！")%」
    PRINTFORMDW 虽然说着『请』字，态度却强势而近乎霸道。
    IF ABL:Ｖ感覚 >= 5
        PRINTFORMDW 她的%SLIT(TARGET)%内部响应着诉求，\@ RAND:2 == 0 ? %FSYN("绞紧")%剧烈缠绕着你的# %FSYN("夹紧")%你的\@ %FSYN("肉棒")%，誓要%FSYN("榨取")%干你的%FSYN("精囊")%。
    ENDIF
    SELECTCASE TEQUIP:TARGET:体位
        CASE POSE_MISSIONARY
        ;正常位
            PRINTFORMD 阿吽 %SPLIT_G("将她的双腿锁在你的背后:用腿缠住你的腰:用手将你的胯部拉向自己:抓住你的手臂将你拉近")% 
        CASE POSE_DOGGYSTYLE
        ;后背位
            PRINTFORMD 阿吽 %SPLIT_G(@"用脚踝推你进入更深:将她的%SPLIT_G("臀部:屁股:后臀:后方")%顶向你:伸手向后抓住你的手臂拉近")% 
        CASE POSE_COWGIRL
        ;骑乘位
            PRINTFORMD 阿吽 %SPLIT_G("抓住你的手腕压住:将全身重量压在你的胸口:抓住你的双肩:贴近进行紧密拥抱:在你反应过来前就急切地摆动腰肢")% 
        CASE POSE_LOTUS
        ;莲华位
            PRINTFORMD 阿吽 %SPLIT_G("将双腿锁在你的背后:用腿缠住你的腰:紧紧抱住你:摆动腰肢阻止你起身")% 
        CASE POSE_REVLOTUS
        ;逆莲华位
            PRINTFORMD 阿吽 %SPLIT_G(@"用体重压制住你:向后倚靠阻止你起身:在你反应过来前就急切地摇动后臀")% 
        CASEELSE
        ;generic
            PRINTFORMD Aunn 紧紧地缠住你
    ENDSELECT
    PRINTFORMDW 并试图强迫你%SPLIT_G("射精:高潮:发射:释放:出来")%在里面...
ELSEIF (TALENT:恋慕 && K120_INSEMINATION_POSSIBLE() && K120_IS_DANGEROUS_DAYS() && K120_PLAYER_EJACULATION_IMMINENT() && EX:TARGET:膣内精液 > 0 && TARGET == 120)
    PRINTFORML 
    PRINTFORMDW Aunn %SPLIT_G(@"注意到你即将到达顶点:感受到你阴茎在她体内%FSYN("悸动")%:意识到你已到达极限:察觉到你又要%FSYN("射精")%")%了
    PRINTFORML 「%MOAN("m",,3)%...%SPLIT_G("射在里面:在里面释放吧:不要拔出来")%, %CALLNAME:MASTER%-san！求求你...！」
    IF ABL:Ｖ感覚 >= 5
        PRINTFORMDW 她的%SLIT(TARGET)%内部响应着恳求\@ RAND:2 == 0 ? %FSYN("缠绕")%般地紧紧裹住你的# %FSYN("紧紧夹住")%你的\@ %FSYN("肉棒")%，决心要将你的%FSYN("睾丸")%彻底%FSYN("榨干")%
    ENDIF
    PRINTFORMDW 这次她没有强迫你的迹象，因为你之前听从了她的要求，只是用充满渴望的眼神望着你...
ENDIF

;--------------------------------------------------------
;K120_CAN_INSEMINATION_BE_WASTED
;判断是否可能因未在子宫内射精而浪费授精的Getter方法
;可与KOJO_EGG文件配合使用，在受精浪费注释前添加额外上下文
;
;返回：若可浪费则为True，否则为False
;--------------------------------------------------------
@K120_CAN_INSEMINATION_BE_WASTED
#FUNCTION
RETURNF (TALENT:恋慕 && K120_INSEMINATION_POSSIBLE() && K120_IS_DANGEROUS_DAYS() && NOWEX:PLAYER:射精)

;--------------------------------------------------------
;K120_INSEMINATION_WASTE_COMMENT
;封装抱怨玩家浪费精液逻辑与对话的方法
;注意：应用于所有非V侵入调用的结尾处（若适用/需要）
;
;触发浪费抱怨需要以下条件（参见K120_CAN_INSEMINATION_BE_WASTED）：
;- 恋慕状态
;- 受精可能
;- 危险日期间
;- 玩家正在射精
;
;参数：
;- ARGS -- 可传递的射精目标字符串，用于确定合适对话
;
;返回: void（仅打印对话）
;--------------------------------------------------------
@K120_受孕浪费评论(ARGS)
如果 K120_CAN_INSEMINATION_BE_WASTED()
    PRINTFORML 
    PRINTFORMDL 阿吽看起来%SPLIT_G("悲伤:不开心:忧郁:惆怅:沮丧:闷闷不乐:凄凉")%地望着你%SEMEN(,1)%的目标不是她的子宫...
    选择分支 ARGS
        分支 "inMouth"
            PRINTFORMW 「我的嘴...真是浪费...」
        分支 "onHand"
            PRINTFORMW 「我的手...真是浪费...」
        分支 "onChest"
            PRINTFORMW 「我的胸...真是浪费...」
        分支 "onPubicArea"
            PRINTFORMW 「明明这么近却...真是浪费...」
        分支 "onFeet"
            PRINTFORMW 「我的脚…真是浪费…」
        CASE "inAnus"
            PRINTFORMW 「搞错洞了…真是浪费…」
        CASE "onArmpits"
            PRINTFORMW 「我的腋下…真是浪费…」
        CASE "inHair"
            PRINTFORMW 「我的头发…真是浪费…」
        CASE "onPubicHair"
            PRINTFORMW 「我的阴毛…明明近在咫尺却又遥不可及…真是浪费…」
    ENDSELECT
ENDIF

;--------------------------------------------------------
;K120_接吻对话
;封装与阿吽接吻的逻辑和对话的方法。包含初吻时的特殊表现
;
;返回：空（仅输出对话）
;--------------------------------------------------------
@K120_接吻对话
;接吻的引导部分
IF CFLAG:うふふ
    PRINTFORMDW 你%SPLIT_G("缩短剩下的距离:向阿吽贴过去:将自己压向阿吽")%并%SPLIT_G("热情地:激烈地:炽热地:渴望地")%%SPLIT_G("将嘴唇压上她的:与她双唇相触:亲吻她:与她唇齿交缠")%。
ELSE
    PRINTFORMDW 你%SPLIT_G("拉近距离:将阿吽拉近:向前倾身")%并%SPLIT_G("温柔地:怜爱地:轻柔地:小心翼翼地")%%SPLIT_G("将嘴唇压上她的:与她双唇相触:亲吻她:将唇轻贴于她唇上")%。
ENDIF

;亲吻对话(及其结尾) + 初吻处理(不进入最终区块)
PRINTFORML 「%RANDKISS("kiss")%...%FSYN("lips_muffle")%...」
IF (TALENT:恋慕 && !TALENT:キス未経験)
    PRINTFORMDW 你用舌头分开她%SPLIT_G("柔软的:精致的:丝绸般的:天鹅绒般的")%的唇瓣，在%SPLIT_G("深情的:热情的:充满爱意的:性感的")%热吻中深入。
    PRINTFORML 「%RANDLIPS(,"kiss:heart:name")%...」
    PRINTFORMDW 阿吽%SPLIT_G("回应:回应:反驳:应答")%着用%SPLIT_G("轻柔地:温柔地:柔软地:小心翼翼地:怯生生地")%%SPLIT_G("抚弄:爱抚:挑逗:轻戳:触碰")%你的舌头。
    PRINTFORMDW 你%SPLIT_G("抽离:结束亲吻:后仰")%时%SPLIT_G("一道唾液在你们两人之间连接起来:形成唾液细丝:留下唾液痕迹:已分不清口中的唾液属于谁")%。
ELSEIF TALENT:キス未経験
    PRINTFORMDW 阿吽的瞳孔因初次感受到他人唇瓣的柔软触感而微微扩大。
    IF (TALENT:思慕 || TALENT:恋慕)
        PRINTFORMDW 当短暂的接触结束时，她的惊讶很快消退并开心地环抱住了你。
        PRINTFORML 「%FSYN("lips_over")%... 我的初吻...」
        PRINTFORMDW 你询问她是否讨厌这样，她立刻用力摇头。
        PRINTFORML 「没有... 我很高兴第一次对象是 %CALLNAME:MASTER%-san... 您呢...？」
        IF TALENT:MASTER:キス未経験
            PRINTFORMDW 你微笑着向她点头，告诉她这也是你的初次体验。
            PRINTFORML 「真的吗？！我好开心！没想到您会选择我这样的人...」
            PRINTFORMDW 她紧紧抱着你，带着爱意的笑容用手指轻轻抚过你的背脊。
        ELSE
            PRINTFORMDW 你露出歉意的笑容挠了挠脸颊，但她再次摇头。
            PRINTFORML 「不用道歉！没关系... 我... 本就不该问的... 但、但是我没有难过哦！」
            PRINTFORMDW 她把脸埋进你的胸膛轻轻磨蹭着。
        ENDIF
        PRINTFORML 「接吻...」
        PRINTFORMDW 阿吽鬆開了擁抱，用指尖輕撫自己的嘴唇，然後用小狗般的眼神望著你。
        PRINTFORML 「那、那个...可以再來一次嗎...？」
        PRINTFORMDW 你以行動作為回答，再次傾身封住了她的櫻唇...
    ELSE
        PRINTFORMDW 當你們結束親吻後，她的震驚逐漸消退，開始用指尖輕觸自己的嘴唇。
        PRINTFORML 「我的初吻...」
        PRINTFORMDW 你詢問她是否討厭這樣，她搖了搖頭。
        PRINTFORML 「不是的...只是感覺進展好像有點太快了...」
        PRINTFORMDW 阿吽用探究的目光抬頭凝視著你。
        PRINTFORML 「這個...該不會...你也是第一次...？」
        IF TALENT:MASTER:キス未経験  //キス未経験
            PRINTFORMDW 你給了她肯定的點頭。
            PRINTFORML 「啊...哈哈...這樣真的可以嗎...？」
        ELSE
            PRINTFORMDW 你露出歉疚的苦笑，搔了搔自己的臉頰。
            PRINTFORML 「啊...这样啊...」
        ENDIF
        PRINTFORMDW 她看起来非常懊悔...
    ENDIF
    RETURN 1
ELSE
    PRINTFORML 「%FSYN("lips_over")%...」
ENDIF

;结束对话
IF TALENT:恋人
    PRINTFORML 「%MOAN("m")%...%CALLNAME:MASTER%-san... 呜嘿嘿～，爱你哟～♥」
    PRINTFORMDW 她的表情融化成一团傻笑着的烂泥，沉醉于爱意之中...
ELSE
    PRINTFORMDW 渴求的视线在你身上无声地流连...
ENDIF

;--------------------------------------------------------
;K120_DO_NOTHING_CHOICES
;封装「什么也不做」指令中额外选项对话的方法
;
;Return: void (打印对话)
;--------------------------------------------------------
@K120_DO_NOTHING_CHOICES
PRINTFORMDL 您想对阿吽做些什么呢？
PRINTFORMDL
PRINTFORMDL [ 0] 舔她的腋下
PRINTFORMDL [ 1] 用肉棒摩擦她的腋窝
PRINTFORMDL [ 2] 舔她的肚脐
PRINTFORMDL [ 3] 与她的头发交合
PRINTFORMDL [ 4] 检查并爱抚她的阴毛
PRINTFORMDL [ 5] 用阴毛素股
PRINTFORMDL [ 6] 抚摸毛茸茸的尾巴
PRINTFORMDL
PRINTFORMDL [99] 什么也不做

;--------------------------------------------------------
;K120_LICK_ARMPIT
;自定义函数，处理舔舐阿吽腋下的成本、经验获取和效果来源
;结合COMF15(阴蒂爱抚)和COMF1(口交)的效果使其值得执行
;
;设置以下参数:
;消耗:
;体力      + 5
;精力       + 50
;
;获得:
;性经验         + 1
;口交经验    + 1
;
;效果来源:
;玩家男性快感 = 50
;快感        = 100
;好感度       = 150
;欲望          = 150
;露出        = 100
;敵意        = 370
;受動        = 145 + 270 * ABL:Submission
;
Return: void
;--------------------------------------------------------
@K120_LICK_ARMPIT
DOWNBASE:体力 += 5
DOWNBASE:気力 += 50

SOURCE:PLAYER:快Ｍ += 50
SOURCE:歓楽 = 100
SOURCE:情愛 = 150
SOURCE:欲情 = 150
SOURCE:露出 = 100
SOURCE:反感 = 370
SOURCE:受動 = 145 + 270 * ABL:従順

IF HETEROSEX(TARGET,PLAYER)
    经验值:(50 + 异性恋(目标,玩家)) += 3
    经验值:玩家:(50 + 异性恋(目标,玩家)) += 3
结束条件

经验值:玩家:口交经验 ++

;--------------------------------------------------------
;K120_腋交
;处理与阿吽进行腋交时的消耗、经验获取和来源的自定义函数
;结合了COMF83(素股)和COMF43(名器)的混合函数
;
;设置以下参数:
;消耗:
;体力      + 20
;精力       + 90
;
;获得:
;性经验         + 3
;
;来源:
;玩家C快感 = 120
;情愛       = 60
;性行為     = 150
;達成  = 50
;屈従      = 500
;逸脱        = 140
;反感       = 120
;
;返回: 無効
;--------------------------------------------------------
@K120_ARMPIT_SEX
DOWNBASE:体力 += 20
DOWNBASE:気力 += 90

SOURCE:玩家:快Ｃ = 120
SOURCE:情愛 = 60
SOURCE:性行動 = 150
SOURCE:達成 = 50
SOURCE:屈従 = 500
SOURCE:逸脱 = 140
SOURCE:反感 = 120

IF HETEROSEX(TARGET,PLAYER)
    EXP:(50 + HETEROSEX(TARGET,PLAYER)) += 3
    EXP:PLAYER:(50 + HETEROSEX(TARGET,PLAYER)) += 3
ENDIF

;--------------------------------------------------------
;K120_LICK_BELLY_BUTTON
;处理舔阿吽肚脐时消耗、经验获取和源的自定义函数
;本质上就是较差版本的口交
;
;设置以下内容:
;消耗:
;体力      + 2
;气力       + 25
;
;源:
;玩家M快感 = 50
;情愛          = 40
;欲情          = 40
;潤滑          = 100
;露出          = 30
;逸脱          = 15
;服従          = 300
;
;返却値: void
;--------------------------------------------------------
@K120_LICK_BELLY_BUTTON
DOWNBASE:体力 += 2
DOWNBASE:気力 += 25

SOURCE:PLAYER:快Ｍ += 50
SOURCE:情愛 = 40
SOURCE:欲情 = 40
SOURCE:液体 = 100
SOURCE:露出 = 30
SOURCE:逸脱 = 15
SOURCE:屈従 = 300

;--------------------------------------------------------
;K120_HAIR_SEX
;处理与阿吽头发性交时成本、经验获取及来源的自定义函数
;在屈服评分不高的情况下毫无价值
;
;设置以下参数：
;消耗：
;体力         + 5
;精力         + 20
;
;Source:
;Player C Pleas. = 90
;暴露度        = 10
;偏差值        = 50
;屈服度        = 1200
;
;返回: void
;--------------------------------------------------------
@K120_HAIR_SEX
DOWNBASE:体力 += 5
DOWNBASE:気力 += 20

SOURCE:PLAYER:快C += 90
SOURCE:露出 += 10
SOURCE:逸脱 += 50
SOURCE:屈従 = 1200

;--------------------------------------------------------
;K120_ARMPITS_NOT_UNLOCKED_DIALOGUE
;该方法封装并打印当玩家尚未通过爱抚命令解锁腋下场景时的对话

;返回: void (打印对话)
;--------------------------------------------------------
@K120_ARMPITS_NOT_UNLOCKED_DIALOGUE
PRINTFORMDW 你在心中打定主意，却突然听到脑海中回响起一个声音。
PRINTFORMDL 
SETCOLOR C_AQUA
FONTBOLD
PRINTFORMW ...能听到吗... ...能听到吗 %CALLNAME:MASTER%...?
PRINTFORMW ...此刻...我将话语直接传递至汝心...可曾听闻...?
PRINTFORMW ...阿吽...尚未知晓腋下之欢愉...通过爱抚引导她体味此道...
PRINTFORMW ...爱抚...汝必须爱抚她... %CALLNAME:MASTER%...
CALL SET_KOJO_COLOR(120)
FONTREGULAR
PRINTFORMDW 那声音逐渐微弱直至彻底消散...

;--------------------------------------------------------
;K120_ARMPITS_REJECTED_DIALOGUE
;封装并打印当玩家之前拒绝腋下相关操作，现在试图通过「无所作为」菜单访问时的对话与选择

;返回：void (打印对话)
;--------------------------------------------------------
@K120_ARMPITS_REJECTED_DIALOGUE
PRINTFORMDW 汝于心中构想着决意，蓦然听闻有声音在颅内回响
PRINTFORMDL 
SETCOLOR C_AQUA
FONTBOLD
PRINTFORMW ...能听到我吗... ...能听到我吗... %CALLNAME:MASTER%...?
PRINTFORMW ...现在... 我直接对你心灵诉说... 能听到我吗...?
PRINTFORMW ...你曾拒绝过腋下的欢愉... 现在想要纠正这个错误吗...?
PRINTFORMW ...像这样重要的选择... 一旦接受腋下的欢愉就无法更改了...
PRINTFORML 
CALL ASK_YN("接受腋下的欢愉", "拒绝腋下的欢愉")
IF !RESULT
    PRINTFORMW ...欢庆吧... 享受腋下的欢愉... %CALLNAME:MASTER%...
    CFLAG:1001 = 1
ELSE
    PRINTFORMW ...那就这样吧... %CALLNAME:MASTER%...
ENDIF
CALL SET_KOJO_COLOR(120)
FONTREGULAR
PRINTFORMDW 那声音逐渐变弱，最终完全消失...

;--------------------------------------------------------
;K120_触摸毛茸茸的尾巴
;处理触摸阿吽毛茸尾巴时的消耗、经验获取及来源的自定义函数
;良好的服从度评分，良好的润滑效果（相当于口交的一半）且消耗低廉
;但不会增加快感或其他效果。最适合用于前戏或享受触摸毛茸尾巴的乐趣！
;
;设置以下参数：
;消耗：
;体力      + 3
;能量       + 10
;
;Source:
;服从度  = 1000
;润滑度 = 300
;
;返回值：void
;--------------------------------------------------------
@K120_TOUCH_FLUFFY_TAIL
DOWNBASE:体力 += 3
DOWNBASE:気力 += 10

SOURCE:屈服 = 1000
SOURCE:体液 = 500

;--------------------------------------------------------
;K120_CARESS_PUBIC_HAIR
;自定义函数，处理爱抚阿吽阴毛的消耗、经验获取和SOURCE值
;字面上只是阴蒂爱抚，但描述重点放在阴毛上
;
;设置以下参数：
;消耗：
;体力                + 5
;精力                + 50
;
;SOURCE：
;阿吽快感值        = 80 (+ 手技等级 * 10 或 + 50 若手技等级 >= 4) * 1.5 若拥有灵巧手指
;快感度            = 100
;好感度            = 150
;欲望值            = 150
;暴露度            = 100
;反感           = 370
;被动             = 145 + (270 * 屈服度)
;
;性经验            + 3
;玩家手交经验 + 1
;
;返回: void (设置经验值等)
;--------------------------------------------------------
@K120_CARESS_PUBIC_HAIR
DOWNBASE:体力 += 5
DOWNBASE:気力 += 50

SOURCE:快Ｃ = 80
IF ABL:PLAYER:指 >= 4
    SOURCE:快Ｃ += 50
ELSE
    SOURCE:快Ｃ += ABL:PLAYER:指 * 10
ENDIF

IF TALENT:PLAYER:靈活手指
    TIMES SOURCE:快Ｃ , 1.50
    TIMES SOURCE:液体 , 1.50
ENDIF


SOURCE:歓楽 = 100
SOURCE:情愛 = 150
SOURCE:欲情 = 150
SOURCE:露出 = 100
SOURCE:反感 = 370
SOURCE:受動 = 145 + 270 * ABL:従順

IF HETEROSEX(TARGET,PLAYER)
    EXP:(50 + HETEROSEX(TARGET,PLAYER)) += 3
    EXP:PLAYER:(50 + HETEROSEX(TARGET,PLAYER)) += 3
ENDIF

EXP:PLAYER:手淫経験 ++

;--------------------------------------------------------
;K120_PUBIC_HAIR_SEX
;处理与阿吽阴毛性交相关COST、EXP获取和SOURCE的自定义函数
;本质上就是股交行为，但特别聚焦于阴毛描写的版本
;
;设置以下参数：
;消耗：
;スタミナ         + 40
;Energy          + 130
;
;Source:
;Player C pleas. = 150
;Aunn C快感      = 150
;親愛            = 80
;性行為           = 250
;奉仕             = 50
;従順             = 500
;変態性           = 120
;反感             = 120
;
;性经验        + 7
;
;返回：void（设置经验值等）
;--------------------------------------------------------
@K120_PUBIC_HAIR_SEX
DOWNBASE:体力 += 40
DOWNBASE:気力 += 130

SOURCE:PLAYER:快Ｃ = 150
SOURCE:快Ｃ = 150
SOURCE:情爱 = 80
SOURCE:性行为 = 250
SOURCE:达成 = 50
SOURCE:屈从 = 500
SOURCE:逸脱 = 120
SOURCE:反感 = 120

IF HETEROSEX(TARGET,PLAYER)
    EXP:(50 + HETEROSEX(TARGET,PLAYER)) += 7
    EXP:PLAYER:(50 + HETEROSEX(TARGET,PLAYER)) += 7
ENDIF

;--------------------------------------------------------
;K120_PILLOW_TALK_CHOICES
;该方法封装了"枕边谈话"命令提供的选项对话
;
;返回: void (打印对话)
;--------------------------------------------------------
@K120_PILLOW_TALK_CHOICES
PRINTFORMDL 你想和阿吽聊些什么？
PRINTFORMDL （每种技巧达到里程碑时都有专属对话！）
PRINTFORMDL （里程碑等级：0级、3级和5级）
PRINTFORMDL
PRINTFORMDL [ 0] 谈论她的手部技巧
PRINTFORMDL [ 1] 谈论她的私处技巧
PRINTFORMDL [ 2] 谈论她的后庭技巧
PRINTFORMDL [ 3] 谈论她的胸部技巧
PRINTFORMDL [ 4] 谈论她的舌技
PRINTFORMDL [ 5] 谈论她的腰部技巧
PRINTFORMDL
PRINTFORMDL [99] 在她耳边诉说甜言蜜语

;--------------------------------------------------------
;K120_BE_SEDUCED_CHOICES
;封装"被诱惑"指令选项对话的方法
;
;返回: void (输出对话)
;--------------------------------------------------------
@K120_BE_SEDUCED_CHOICES
PRINTFORMDL 你想让阿吽谈论什么技巧？
PRINTFORMDL
PRINTFORMDL [ 0] 谈论你的手部技巧
PRINTFORMDL [ 1] 谈论你的私处技巧
PRINTFORMDL [ 2] 谈论你的后庭技巧
PRINTFORMDL [ 3] 谈论你的胸部技巧
PRINTFORMDL [ 4] 谈论你的舌技
PRINTFORMDL [ 5] 谈论你的腰部技巧
PRINTFORMDL
PRINTFORMDL [99] 在你耳边低语甜言蜜语

;--------------------------------------------------------
;K120_FIRST_TIME_VAGINAL_SEX
;封装阿吽与玩家初次阴道性交对话的方法
;
;参数：
;- ARGS -- 用于确定合适对话和描述的当前姿势的可传递字符串；
;       -- 可传递值: lyingMissionary, standingMissionary, doggyStyle, standingDoggyStyle, cowGirl, lotusPosition, reverseLotus
;
;返回: void (输出对话)
;--------------------------------------------------------
@K120_FIRST_TIME_VAGINAL_SEX(ARGS)
SELECTCASE ARGS
    CASE "lyingMissionary", "standingMissionary"
        PRINTFORMDW 阿吽将松软的狗爪状拳头抵在胸前，先看向你的%TINKO(MASTER)%然后看向你。
    CASE "doggyStyle", "standingDoggyStyle", "reverseLotus"
        PRINTFORMDW 阿吽的尾巴僵硬地绷直，她回过头来先看向你的%TINKO(MASTER)%然后看向你。
    CASE "cowGirl", "lotusPosition"
        PRINTFORMDW 阿吽小心翼翼地跨坐在你身上，将你的%TINKO(MASTER)%根部压在她鼓起的阴户上摩擦。
ENDSELECT

SELECTCASE ARGS
    CASE "lyingMissionary", "standingMissionary", "doggyStyle", "standingDoggyStyle"
        PRINTFORML 「啊、要放进来了吗？」
        PRINTFORMDW 你点点头，将阴茎对准了她的入口。
    CASE "cowGirl", "lotusPosition", "reverseLotus"
        PRINTFORMW 「我、我要放进来了哦？」
        PRINTFORMDW 你点点头，协助她将阴茎对准入口。
ENDSELECT

PRINTFORML 「哈哇...等、等一下！」

SELECTCASE ARGS
    CASE "lyingMissionary", "standingMissionary"
        PRINTFORMDW 她将手放在你的胸口轻轻推搡。
    CASE "doggyStyle", "standingDoggyStyle"
        PRINTFORMDW 她弓起后背把臀部从你身上移开。
    CASE "cowGirl", "lotusPosition"
        PRINTFORMDW 她将双手按在你的胸口上抬起了腰部。
    CASE "reverseLotus"
        PRINTFORMDW 她把双手按在你的大腿上抬起了腰部。
ENDSELECT

PRINTFORMDW 你询问她是否有什么问题需不需要更多时间，但她摇头回应了你。
PRINTFORML 「没……我只是……哈哈……有、有点害怕吧？」
PRINTFORMDW 你注意到她微微颤抖的模样，温柔地抚摸她的头。
PRINTFORML 「嗯！对、对不起让你担心了……」
PRINTFORMDW 你告诉她可以按自己想要的时间慢慢来。
PRINTFORML 「我不想让你久等，所以……」

SELECTCASE ARGS
    CASE "lyingMissionary", "standingMissionary"
        PRINTFORMDW 阿吽缩回双手紧紧攥住，做了几次深呼吸。
    CASE "doggyStyle", "standingDoggyStyle"
        PRINTFORMDW 阿吽再次挺直背部，让你能够接触到她的臀部。
    CASE "cowGirl", "lotusPosition", "reverseLotus"
        PRINTFORMDW 阿吽再次降低臀部，将她的入口悬停在你的阴茎上方。
ENDSELECT

SELECTCASE ARGS
    CASE "lyingMissionary", "standingMissionary", "doggyStyle", "standingDoggyStyle"
        PRINTFORMW 「我准备好了...」
        PRINTFORMDL 你调整好姿势准备进入，却又被她制止了动作
        PRINTFORMW 「等、等等！先跟你说...我还是处女...」
    CASE "cowGirl", "lotusPosition", "reverseLotus"
        PRINTFORMW 「要、要来了...」
        PRINTFORMDW 虽然嘴上这么说着，她却迟迟没有动作只是害羞地看着你
        PRINTFORMW 「那、那个…先说好了…我还是处女…」
ENDSELECT

PRINTFORMDW 你轻笑着告诉她这很明显。
PRINTFORML 「啊…哈哈…你、你呢？」
IF IS_DOUTEI(MASTER)
    PRINTFORMDW 你尴尬地挠着脸颊点了点头。
    PRINTFORML 「呜、呜哇…等等，所以你决定要把第一次交给我…」
    PRINTFORMW 「明明你自己也在紧张，我却表现得这么害怕…」
    PRINTFORMDW 阿吽拍了拍自己的脸，朝你握紧了拳头。
ELSE
    PRINTFORMDW 你挠着脸颊歉意地摇了摇头。
    PRINTFORML 「啊…没关系。知道你有经验反而让我安心些」
    PRINTFORMDW 阿吽做了几次深呼吸，重新坚定了决心。
ENDIF

SELECTCASE ARGS
    CASE "lyingMissionary", "standingMissionary", "doggyStyle", "standingDoggyStyle"
        PRINTFORMDW 你们互相点头示意，再度调整好自己的位置。
    CASE "cowGirl", "lotusPosition", "reverseLotus"
        PRINTFORMDW 你们互相点了点头，她再次调整你的性器位置，缓缓地坐了下去。
ENDSELECT

SELECTCASE ARGS
    CASE "lyingMissionary", "standingMissionary", "cowGirl", "lotusPosition"
        PRINTFORMDW 当你抬头查看她的状态时，发现她闭着眼睛僵硬的像块石头。
    CASE "doggyStyle", "standingDoggyStyle", "reverseLotus"
        PRINTFORMDW 当你侧身观察她的表情时，发现她闭着眼睛僵硬的像块石头。
ENDSELECT

PRINTFORMDW 你摸索着找到她的手，与她十指相扣。
PRINTFORML 「啊...」
PRINTFORMDW 她紧紧回握你的手，通过颤抖的手掌能清晰感受到她的紧张程度。
PRINTFORML 「我、我、我准备好了。这次是真的！」

SELECTCASE ARGS
    CASE "lyingMissionary", "standingMissionary", "doggyStyle", "standingDoggyStyle"
        PRINTFORMDW 你缓缓将阴茎推入，阿吽随着每寸深入而不断抬高臀部。
        PRINTFORMW 「要...进来了...」
        PRINTFORMDW 你的阴茎逐渐被她温暖的内部包裹，你小心翼翼地突破那难以置信的紧致。
        PRINTFORMDW 当龟头触及她的处女膜时，你稍加用力，毫无阻碍地突破了那层屏障。
    CASE "cowGirl", "lotusPosition", "reverseLotus"
        PRINTFORMDW 阿吽缓缓将你的阴茎纳入体内，随着不断深入，她咬住了自己的嘴唇。
        PRINTFORMW 「要...进来了...」
        PRINTFORMDW 你的阴茎逐渐被她温暖的内部包裹，你小心翼翼地突破那难以置信的紧致。
        PRINTFORMDW 当龟头触及她的处女膜时，阿吽稍加用力，毫无阻碍地突破了那层屏障。
ENDSELECT

PRINTFORML 「呜...痛...」
PRINTFORMDW 阿吽将你们交握的手移到嘴边，把你的食指含入口中。
PRINTFORMDW 她误以为是自己的手指，用力咬下，立即咬出了血。
PRINTFORMDW 你紧闭双眼咬紧牙关，强忍疼痛不喊出声，以免吓到她。

SELECTCASE ARGS
    CASE "lyingMissionary", "standingMissionary", "doggyStyle", "standingDoggyStyle"
        PRINTFORMDW 如同她忍耐着疼痛般，你也忍耐着痛楚，短暂休息后你轻轻前后摆动腰部。
    CASE "cowGirl", "lotusPosition", "reverseLotus"
        PRINTFORMDW 如同她忍耐着疼痛般，你也忍耐着痛楚，短暂休息后她轻轻上下摆动腰部。
ENDSELECT

PRINTFORML 「%MOAN()%... はう... あっ... 来ちゃう...」
PRINTFORMDW 她再次睁开湿润的眼睛望着你，脸上红潮明显取代了原先的痛楚。
PRINTFORML 「我的第一次...%MOAN()%...和 %CALLNAME:MASTER%-san一起...」

SELECTCASE ARGS
    CASE "lyingMissionary", "standingMissionary", "cowGirl", "lotusPosition"
        PRINTFORMDW 她的视线向下移动，注意到你食指上的咬痕与血迹。
    CASE "doggyStyle", "standingDoggyStyle", "reverseLotus"
        PRINTFORMDW 她侧头看向你们交握的双手，注意到你食指上的咬痕与血迹。
ENDSELECT

PRINTFORML 「咬痕...？哎、但是——」
PRINTFORMDW 阿吽举起了自己的食指，却没能找到咬痕。
PRINTFORML 「啊、糟糕！难道我咬的是你的手指而不是我的吗？！」
PRINTFORMDW 阿吽用惊慌的眼神看向你，本能地松开了你的手。
PRINTFORMDW 你温柔地用那只手轻抚她的脸颊，告诉她她的痛楚也是你的痛楚，如果只有她流血的话就太不公平了。
PRINTFORML 「%CALLNAME:MASTER%-san...」
PRINTFORMDW 阿吽欢快地把你的手再次握进自己掌中，用脸颊蹭着它...
PRINTFORMW 「抱歉还有...」
PRINTFORMW 「谢谢你...」

SELECTCASE ARGS
    CASE "lyingMissionary", "standingMissionary", "doggyStyle", "standingDoggyStyle"
        PRINTFORMDW 她示意你继续动作，而你欣然从命...
    CASE "cowGirl", "lotusPosition", "reverseLotus"
        PRINTFORMDW 她重新开始摆动腰肢，并加快了动作的节奏将交合带入下一阶段...
ENDSELECT

;--------------------------------------------------------
;K120_EJAC_STAMINA_COMMENT
;封装性交后继续对话的方法
;避免代码重复。调用位置: K120_CONTINUED_VAGINAL_AFTER_EJAC, K120_CONTINUED_ANAL_AFTER_EJAC
;
;返回: void (打印对话)
;--------------------------------------------------------
@K120_EJAC_STAMINA_COMMENT
PRINTFORMW 「%MOAN(,,2)%... %SPLIT_G(@"你这么快就再来一次没问题吗？:明明才刚射过...:还有余力继续吗？:你的耐力-%MOAN()%-真是厉害呢!:还想要做更多吗？")%」

;--------------------------------------------------------
;K120_CONTINUED_VAGINAL_AFTER_EJAC
;玩家射精后继续阴道性交的对话封装方法
;
;返回：无（打印对话）
;--------------------------------------------------------
@K120_CONTINUED_VAGINAL_AFTER_EJAC
IF (TALENT:恋慕 && K120_INSEMINATION_POSSIBLE() && K120_IS_DANGEROUS_DAYS())
    PRINTFORML 「%MOAN("m",,2)%... %SPLIT_G("嗯啊还要更多:再多给点嘛:你还没完呢:人家的肚子还没吃饱呢:还要更多更多:再射进来吧:继续呀继续呀:真高兴你还没结束")%～♥!」
    PRINTFORMDW 阿吽%SPLIT_G("愉悦地叹息着:后仰着头:咬着嘴唇:开始渗出汗水:向你彻底臣服:回应着你的欲望")%任你继续%SPLIT_G("搅动她的内部:勤奋地抽插她:与她交合:和她做爱:你们的恩爱时光:你们的交欢行为:你们的亲密接触:撞击她的蜜穴")%...
ELSE
    CALL K120_EJAC_STAMINA_COMMENT()
ENDIF

;--------------------------------------------------------
;K120_CONTINUED_VAGINAL_AFTER_EJAC_PROACTIVE
;当阿吽掌握主导权时，封装玩家射精后继续阴道性交对话的方法
;
;Return: void (打印对话)
;--------------------------------------------------------
@K120_CONTINUED_VAGINAL_AFTER_EJAC_PROACTIVE
IF (TALENT:恋慕 && K120_INSEMINATION_POSSIBLE() && K120_IS_DANGEROUS_DAYS())
    PRINTFORMDW 她的%SPLIT_G("表情变得阴沉:双眸向下凝视着你:喘息变得粗重")%，%SPLIT_G("沉溺于本能欲望中:加快了动作节奏:不再给你喘息的机会")%
    PRINTFORMW 「%MOAN("m",,2)%...%SPLIT_G(@"抱歉...停不下来...:还要更多， %CALLNAME:MASTER%-san...!:还有存货对吧？:子宫还想要更多...:更多...还要更多...!")%」
ELSE
    PRINTFORMW 「%MOAN("m",,2)%...%SPLIT_G(@"明明今天不该...:身体擅自动了起来...:明明今天不该却渴望更多...:为什么我-%MOAN()%-停不下来？:刚射过对不起...但还要!)%」
ENDIF
PRINTFORMDW 阿吽%SPLIT_G("发出愉悦的叹息:将头向后仰去:咬住嘴唇:渗出汗水:急切地摆动腰肢:回应着你的欲望")%，继续%SPLIT_G("搅动腔内:殷勤侍奉:与你交合:与你缠绵:你们的欢爱:你们的云雨:你们的鱼水之欢:将肉棒夯入蜜壶")%...

;--------------------------------------------------------
;K120_射精后继续肛交
;封装玩家射精后继续肛交对话的方法
;
;Return: void (打印对话)
;--------------------------------------------------------
@K120_CONTINUED_ANAL_AFTER_EJAC
IF (TALENT:恋慕 && K120_INSEMINATION_POSSIBLE() && K120_IS_DANGEROUS_DAYS())
    PRINTFORML 「%MOAN("m",,2)%... %SPLIT_G("你真的要在那里继续做吗…？:明明另一个地方已经准备好了…:不要只关注这个地方好吗…？:我…不、不要只关注这个地方好吗…？")%」
    PRINTFORMDW Aunn %SPLIT_G("在快感中叹息:向后仰头:咬住嘴唇:开始出汗:向你彻底臣服:回应你的欲望")% 虽然嘴上抱怨着，%CALLNAME:MASTER%仍然继续着%SPLIT_G("搅动她的内部:勤勉地抽插:与她的后穴交合:与她交合:你们的交媾行为:你们的做爱过程:你们的亲密接触:撞击她的臀部")%...
ELSE
    CALL K120_EJAC_STAMINA_COMMENT()
ENDIF

;--------------------------------------------------------
;K120_CONTINUED_ANAL_AFTER_EJAC_PROACTIVE
;当阿吽掌握主导权时，封装玩家射精后继续阴道性交对话的方法
;
;Return: void (打印对话)
;--------------------------------------------------------
@K120_CONTINUED_ANAL_AFTER_EJAC_PROACTIVE
IF (TALENT:恋慕 && K120_INSEMINATION_POSSIBLE() && K120_IS_DANGEROUS_DAYS())
    PRINTFORMW 「%MOAN("m",,2)%... %SPLIT_G(@"今天真的不该在这里做的、可是我停不下来...:在你射进去之前应该停下的、可是...!:明明一直让腰部停下来却不受控制!:这感觉实在太舒服了停不下来...")%」
ELSE
    PRINTFORMW 「%MOAN("m",,2)%... %SPLIT_G(@"身体擅自动起来了...::为什么我就是停不下-%MOAN()%-来？:明明你才刚射过、但是...对不起！")%」
ENDIF
PRINTFORMDW 阿吽%SPLIT_G("愉悦地叹息:向后仰头:咬住嘴唇:开始出汗:急切地扭动腰肢")%继续着%SPLIT_G("搅动内部的动作:勤勉侍奉的行为:你们的交合行为:你们的交媾行为:你们的性事:将肉棒顶入肛门的动作")%...

;--------------------------------------------------------
;K120_FIRST_TIME_ANAL_SEX
;封装阿吽与玩家初次肛交对话的方法
;
;参数:
;- ARGS —— 用于传递当前体位的字符串，用于确定适当的对话和描述
;       —— 可传递值: lyingMissionary, standingMissionary, doggyStyle, standingDoggyStyle, cowGirl, lotusPosition, reverseLotus
;
;返回值: void（打印对话）
;--------------------------------------------------------
@K120_FIRST_TIME_ANAL_SEX(ARGS)
SELECTCASE ARGS
    CASE "lyingMissionary"
        PRINTFORMDW 你抓住阿吽的膝窝，将她的双腿压向腹部，用阴茎戳弄她此刻毫无防备的肛门。
    CASE "standingMissionary"
        PRINTFORMDW 你将阿吽的右腿架在肩上，双手掰开她的臀瓣，用阴茎抵住她的肛门。
    CASE "doggyStyle", "standingDoggyStyle", "reverseLotus"
        PRINTFORMDW 你掰开阿吽的臀瓣，用阴茎在她肛门上来回磨蹭，最后用龟头顶端戳弄入口。
    CASE "cowGirl", "lotusPosition"
        PRINTFORMDW 你环抱住阿吽的腰肢分开臀瓣，用阴茎前端顶住她的肛门。
ENDSELECT

PRINTFORML 「诶？想、想插那里？但是那地方是... 不是正确的洞，你知道吗？」
PRINTFORMDW 你挠着脸颊坚持表示无论如何都想这么做。
PRINTFORML 「既、既然是你 %CALLNAME:MASTER%先生的话... 但、但是要温柔点哦？」
PRINTFORMDW 你缓缓向前推进，看着自己的前端逐渐没入她丰腴的臀部。
PRINTFORMDW 随着深入程度的增加，阿吽的表情愈发扭曲，发出痛苦而费力的叹息。

SELECTCASE ARGS
    CASE "lyingMissionary", "standingMissionary", "cowGirl", "lotusPosition"
        PRINTFORMDW 她的大腿随着每次深入都会生理性地抽搐，却仍在努力忍耐疼痛。
        PRINTFORMDW 当你推进到中途停下时，阿吽立刻摇着头轻拍你的胸膛示意继续。
    CASE "doggyStyle", "reverseLotus"
        PRINTFORMDW 她的尾巴随着每次深入都会突然竖起僵直，片刻后又恢复原状。
        PRINTFORMDW 当你推进到中途停下时，阿吽立刻摇着尾巴示意你继续动作。
ENDSELECT

PRINTFORML 「%GROAN()%...」
PRINTFORMDW 遵循她的指示，你将性器一口气插到底部，阿吽立刻剧烈反应地呻吟着咬紧牙关。
PRINTFORMDW 显然她承受着巨大痛苦，你告诉她你会停下来并忘了这件事。

SELECTCASE ARGS
    CASE "lyingMissionary", "standingMissionary"
        PRINTFORMDW 她抓住你的腰阻止你拔出，同时激烈地摇头。
    CASE "cowGirl", "lotusPosition", "reverseLotus"
        PRINTFORMDW 她用体重压住你阻止你拔出，并用力摇了摇头。
    CASE "doggyStyle"
        PRINTFORMDW 她往后顶住你阻止你拔出，并用力摇了摇头。
ENDSELECT

PRINTFORMW 「哈…哈… %CALLNAME:MASTER%-san 想这么做的话，我会忍耐到习惯为止的。」
IF TALENT:恋人
    PRINTFORMW 「恋人间就是会互相做这种事对吧？我知道自己以后也会有向你任性请求的时候啦…」
ENDIF
PRINTFORMW 「所以别担心我，好吗？继续吧...」
PRINTFORMDW 你缓慢而谨慎地移动腰肢，但阿吽尚未显露出快感。
PRINTFORMDW 她的直肠因此紧紧箍住并向下挤压着你的性器，竭尽全力想要排除这个异物。
PRINTFORMDW 你抬头看向阿吽确认她的决心是否坚定，发现一滴泪珠正从她的脸颊滑落。
PRINTFORMDW 尽管如此，她仍没有放弃的迹象。
PRINTFORMDW 于是你咽下忧虑，心知要是你拒绝相信她、只会让她更加受伤。
PRINTFORMDW 你转而尝试以缓慢而有节奏的速度推进，尽量让她进一步适应这个过程，使她能更从容地预判每一次抽插。
PRINTFORMDW 你保持这样的节奏稍作延续，直到感觉到她内部逐渐放松下来——
PRINTFORML 「%MOAN()%……」
PRINTFORMDW ——她的第一次 moan 从唇间溢出。

SELECTCASE ARGS
    CASE "lyingMissionary", "standingMissionary", "cowGirl", "lotusPosition"
        PRINTFORMDW 你轻抚她的脸颊，加快节奏后很快发现她的 moan声压过了呻吟声。
    CASE "doggyStyle", "reverseLotus"
        PRINTFORMDW 你抚摸着她的侧腹加快节奏，很快发现她的 moan声盖过了呻吟声。
ENDSELECT

PRINTFORML 「%MOAN(,,2)%... 屁股开始发热... 这、这是什么感觉？」
PRINTFORMDW 你通过恢复正常节奏作为回应，让快感的震颤贯穿她的直肠。
PRINTFORML 「%MOAN()%！真的开始舒服起来了... 欸嘿嘿，看吧？我就说我没问题的！%MOAN()%！」
PRINTFORMDW 你奖励着她的忍耐力，配合着摆动腰肢...


;--------------------------------------------------------
;K120_ENDING_POSSIBLE
;判断结局是否可达的获取方法
;需要满足以下条件:
; - 恋人关系
; - 至少有一个孩子
; - 完成故事时间事件（通过对话指令）
;
; - 在约会中完成以下地点的阿吽对话（若在对话结尾被询问日记条目即表示触发正确对话）:
; --- TH6:  红魔馆 -> 大厅、食堂、图书馆、地下室（十六夜咲夜）
; --- TH7:  冥界 -> 白玉楼/白玉楼庭院（西行寺幽幽子）
; --- TH8:  竹林子 -> 非永遠亭或幽香住所周辺区域（藤原妹红）
; --- TH9:  冥界 -> 三途河或彼岸（小野冢小町）
; --- TH10: 妖怪之山（山顶） -> 守矢神社本殿+神社境内（八坂神奈子）
; --- TH11: 地霊殿 -> 旧灼熱地獄跡（霊烏路空）
; --- TH12: 命蓮寺 -> 本堂（寅丸星）
; --- TH13: 命蓮寺 -> 境内（雲居一轮）
; --- TH14：妖怪山（山脚） -> 深山（清兰）
; --- TH15：梦境世界/月亮 -> 静海（纯狐）
; --- TH16：冥界 -> 迷途之家（摩多罗隐岐奈）
; --- TH17：冥界 -> 灵长园（驹草太夫）
; --- TH18：妖怪山（山顶） -> 山湖（丁礼田舞）
;
; - 在弹幕战中击败她
; - 亲吻过她
; - 看过人类村落甜点店事件（需在约会期间访问）
; - 在人类村落酒街/商店街约会时购买过任意帽子（对话指令）
; - 当前禁用：已遭遇住宅区所有客串角色【炭治郎、萨莎和查尔】（对话指令）
; - 在进度计数达12后于月之都发现两件碎片（身处楼阁区、都城区或兔区时使用对话指令）
; - 在境界之路进行过祭典约会（在该处约会时选择对话选项）
; - 与阿吽合影（约会期间访问香霖堂并持续使用对话选项）
; - 与阿吽共同钓起至少一件浮木
; - 通过性爱中的"什么也不做"指令尽情抚摸蓬松尾巴
; - 帮助阿吽对琪露诺复仇（在雾之湖约会时与阿吽对话）
;
;返回: 若可触发结局则为真，否则为假。
;--------------------------------------------------------
@K120_ENDING_POSSIBLE
#FUNCTION
RETURNF (TALENT:恋人 && CFLAG:子供人数 > 0 && CFLAG:1003 >= 18 && CFLAG:1002 >= 13 && CFLAG:TARGET:弾幕勝負勝利 == 1 && !TALENT:キス未経験 && !FIRSTTIME("AunnSweetsShopEvent", 1) && !FIRSTTIME("AunnBoughtHeadpiece", 1) && !FIRSTTIME("AunnKourindouFindsPolaroidCamera", 1) && CFLAG:1004 && !FIRSTTIME("AunnFishingCaughtDriftwood", 1) && !FIRSTTIME("AunnFindsTheTwoPiece", 1) && !FIRSTTIME("AunnRoLFestivalDate", 1) &&!FIRSTTIME("AunnWinAgainstCirno", 1))

;--------------------------------------------------------
;K120_ENDING_CHOICES
;封装结局事件中选项对话的方法
;
;返回：void（打印对话）
;--------------------------------------------------------
@K120_ENDING_CHOICES
PRINTFORMDL [ 0] 你将会继续与她共度每一天
PRINTFORMDL [ 1] 你将会时不时去看看她
PRINTFORMDL [ 2] 你将会离开去追求其他目标

;--------------------------------------------------------
;K120_CLIMAX_DIALOGUE
;这个方法封装了各种高潮场景的对话。根据高潮来源添加对话和描述。
;
;返回: void (打印对话)
;--------------------------------------------------------
@K120_CLIMAX_DIALOGUE
#DIM climaxCount
#DIMS aunnClimaxDialogue
#DIMS aunnClimaxDescription

climaxCount = 0
aunnClimaxDialogue = 「
aunnClimaxDescription =

IF NOWEX:Ｃ絶頂
    aunnClimaxDialogue += "我的阴蒂..." + SPLIT_G("好舒服:要疯了:变得好敏感:不断传来冲击到腹部:让我感觉超棒") + "～♥... "
    aunnClimaxDescription += "她的阴蒂 " + SPLIT_G("变得硬挺:完全凸出:微微颤抖:完全外露:轻轻跳动:明显突出")
    climaxCount++
ENDIF

IF NOWEX:Ｖ絶頂
    aunnClimaxDialogue += "我的小穴..." + SPLIT_G("里面感觉好舒服:顶到深处了:腹部不断传来冲击:要疯掉了:被搅得乱七八糟:还要更多") + "～♥... "
    aunnClimaxDescription += climaxCount == 0 ? "她的蜜穴 " # "，她的蜜穴 "
    IF TEQUIP:体位
        aunnClimaxDescription += RAND:2 == 0 ? FSYN("缠绕:s") + "住你的肉棒" # SPLIT_G("夹紧:按压:收缩") + "你的肉棒"
    ELSE
        aunnClimaxDescription += RAND:2 == 0 ? FSYN("缠绕:s") + "住异物" # SPLIT_G("夹紧:按压:收缩") + "异物"
    ENDIF
    climaxCount++
ENDIF

IF NOWEX:Ａ絶頂
    aunnClimaxDialogue += "我的肛门..." + SPLIT_G("好深:身体在发抖:里面好烫:已经放不开了") + "～♥... "
    aunnClimaxDescription += climaxCount == 0 ? "她的肛门 " # ", her anus "
    IF TEQUIP:体位
        aunnClimaxDescription += RAND:2 == 0 ? FSYN("twine:s") + " 在你的阳具周围广泛缠绕" # SPLIT_G("夹紧:按压:紧握") + " 用力挤压你的阳具"
    ELSE
        aunnClimaxDescription += RAND:2 == 0 ? FSYN("twine:s") + " 在异物周围广泛缠绕" # SPLIT_G("夹紧:按压:紧握") + " 用力挤压异物"
    ENDIF
    climaxCount++
ENDIF

IF NOWEX:Ｂ絶頂
    aunnClimaxDialogue += "我的乳头..." + SPLIT_G("变得好硬:敏感得不行:已经不正常了:脑袋都开始发麻") + "～♥... "
    aunnClimaxDescription += climaxCount == 0 ? "她的乳头 " # ", 她的乳头 " + SPLIT_G("变得硬挺:开始发热:傲然挺立:肿胀起来")
    climaxCount++
ENDIF

IF NOWEX:Ｍ絶頂
    ;along with my mouth
    aunnClimaxDialogue += "我的嘴唇..." + SPLIT_G("连这里都:好痒好痒:光是嘴唇就:只是用嘴唇就") + "～♥... "
    aunnClimaxDescription += climaxCount == 0 ? "她的嘴唇 " # ", 她的嘴唇 " + SPLIT_G("一碰就会让她颤抖:触及了敏感的极限:将快感的刺痛感直击大脑")
    climaxCount++
ENDIF

SELECTCASE NOWEX:TotalEX
        ;强烈的绝顶
        ;強
    CASE 5 TO 15
        PRINTFORM %BREAKENG(@"%aunnClimaxDialogue%%MOAN("h")%～♥♥♥...%SLUR(SPLIT_G("要去了:再也忍不住了:我-要来了:要去了:舒服过头了"), -2)%～♥♥!!")%
        ;中等绝顶
		;中
    CASE 2 TO 4
        PRINTFORM %BREAKENG(@"%aunnClimaxDialogue%%MOAN("m")%～♥♥...%SPLIT_G("要去了:已经忍不住了:要、要去了:要去了:太舒服了")%～♥♥!")%
        ;微弱绝顶
		;弱
    CASE 1
        PRINTFORM %BREAKENG(@"%aunnClimaxDialogue%%MOAN("l")%～♥...%SPLIT_G("要去了:已经忍不住了:要、要去了:要去了:真的好舒服")%～♥!")%
    CASEELSE
        ;fallback
        PRINTFORM %BREAKENG(@"%aunnClimaxDialogue%%MOAN("l")%～♥...%SPLIT_G("要去了:已经不行了:要、要去了:要去了:太舒服了")%～♥!")%
ENDSELECT
PRINTFORML 」

aunnClimaxDescription += " 她的身体 " + FSYN("颤抖:s")
IF NOWEX:四重絶頂
    aunnClimaxDescription += " 当她的 " + FSYN("绝顶") + " 四重贯穿全身时"
ELSEIF NOWEX:三重絶頂
    aunnClimaxDescription += " as her " + FSYN("高潮") + "在她体内奔涌三重激荡"
ELSEIF NOWEX:二重絶頂
    aunnClimaxDescription += " 随着她的 " + FSYN("orgasm") + " 双重快感流遍全身"
ELSE
    aunnClimaxDescription += "当她" + FSYN("orgasm:s")
ENDIF
PRINTFORMDW %BREAKENG(@"%aunnClimaxDescription%...")%

;--------------------------------------------------------
;K120_釣り開始時_台詞
;阿吽の釣り糸を引く動作を封じ込めるメソッド
;
;返り値: void (台詞表示)
;--------------------------------------------------------
@K120_FISHING_INTRO_DIALOGUE
PRINTFORML 「%SPLIT_G("何か釣れたみたい:引っ張られる感覚がある:糸が引っ張られている:浮きが動いてる:竿先がビクンビクン")%!」

;--------------------------------------------------------
;K120_釣り軽物キャッチ時_台詞
;封装阿吽捕获轻小物品时对话的方法（鱼尺寸 < 50、纸张、转子、杂项物品）
;
;Return: void (输出对话)
;--------------------------------------------------------
@K120_FISHING_LIGHT_CATCH_DIALOGUE
PRINTFORML 「%SPLIT_G("但好像有点轻:没什么阻力感呢:完全感觉不到拉力:这个应该很简单:钓线几乎没绷紧:鱼竿完全没有张力")%!」
PRINTFORMDL 她 %SPLIT_G("轻松地收回了钓线:收线时毫无阻碍:轻松提起钓竿")%，但 %SPLIT_G("捕获物:咬钩")% 并不 %SPLIT_G("如她所期望的那样令人兴奋:如她所愿般特别:像她期待的那样:像她想要的那样:符合她的心意")%。

;--------------------------------------------------------
;K120_FISHING_MEDIUM_CATCH_DIALOGUE
;封装阿吽捕获中等大小鱼类（尺寸50到150）对话的方法
;
;Return: void (prints dialogue)
;--------------------------------------------------------
@K120_FISHING_MEDIUM_CATCH_DIALOGUE
PRINTFORML 「%SPLIT_G("拉力不错:应该是个大家伙:这肯定是个好货:它挣扎得挺厉害:能看到它的影子了:别想逃出我的掌心:看我怎么收线")%!」

;--------------------------------------------------------
;K120_FISHING_HEAVY_CATCH_DIALOGUE
;封装阿吽钓到大型鱼（尺寸＞150）时对话的方法
;
;返回：void（打印对话）
;--------------------------------------------------------
@K120_FISHING_HEAVY_CATCH_DIALOGUE
PRINTFORML 「%SPLIT_G("鱼线绷得太紧了:咕...反抗得好厉害:感觉钓到大家伙了:水下的影子好大:拉力太强了:好强……要是不小心的话鱼竿可能会被拖走")%！」
PRINTFORMDW 她与 %SPLIT_G("目标:潜在猎物:咬钩")% 激烈角力着， %SPLIT_G("鱼竿弯成了完美的U形:钓线看起来快要断掉了:整个后背都在发力:使劲向后拉着鱼竿")%。
PRINTFORML 「%SPLIT_G("嗯...再加把劲:唔唔...就差一点了:咕唔...再坚持一下:呜噜...赶紧投降吧:嘎啊...别挣扎了")%！！」
PRINTFORMDW %SPLIT_G("张力终于减弱了:她的体力最终占了上风:她终于抓住了胜利:钓竿坚持到了最后")% 随着奋力一拽，她拉出了自己的 %SPLIT_G("猎物:咬钩")%。
PRINTFORMDW 她摇晃着尾巴将战利品举到你面前，露出 %SPLIT_G("满足的:成就感")% 的表情。

;--------------------------------------------------------
;K120_FISHING_CALLOUT_DIALOGUE
;封装阿吽喊出你的渔获对话的方法
;
;返回值：void（打印对话）
;--------------------------------------------------------
@K120_FISHING_CALLOUT_DIALOGUE
PRINTFORML 「%SPLIT_G("浮标在动:钓线被拉扯了:好像有东西上钩了:水面有涟漪:浮标下面有动静:看到黑影了:钓竿在颤动")%」!

;--------------------------------------------------------
;CHARA_INFO_KOJO_EGG_K120
;封装阿吽角色信息的方法
;包含固定编码的角色名称、种族和能力
;显示已触发事件、人物图鉴进度及结局进度
;
;Return: 1
;--------------------------------------------------------
@CHARA_INFO_KOJO_EGG_K120()
CALL M_KOJO_EGG_COLOR_K120
;PRINTFORML %CSVCSTR(120, 10)% ;JP
;PRINTFORML %CSTR:120:10% ;EN (Main)
;PRINTFORML %nameArray:120:6% ;Neodev
;由于Main版与Neodev版存在冲突，此处"种族、能力"等资料行采用硬编码。如果您修改CSV后发现游戏内未更新...抱歉！
PRINTFORML ～醉心神佛的守护神兽～　●种族：狛犬　●能力：发现神仏程度的能力
RESETCOLOR
PRINTL 

;阿吽专属事件。这些是达成结局所需的条件
PRINTFORML 
FONTBOLD
PRINTFORML 【已触发事件】
FONTREGULAR
CALL K120_PRINT_ACHIEVEMENT_STATE(CFLAG:TARGET:弾幕勝負勝利 == 1, "在弹幕胜負中击败她")
CALL K120_PRINT_ACHIEVEMENT_STATE(!FIRSTTIME("AunnWinAgainstCirno", 1), "帮助阿吽对琪露诺复仇")
CALL K120_PRINT_ACHIEVEMENT_STATE(CFLAG:1003 >= 18, "告知她所有异变的经过")
CALL K120_PRINT_ACHIEVEMENT_STATE(CFLAG:1002 >= 13, "一起访问了所有异变地点")
CALL K120_PRINT_ACHIEVEMENT_STATE(!FIRSTTIME("AunnSweetsShopEvent", 1), "一起去了点心店")
CALL K120_PRINT_ACHIEVEMENT_STATE(!FIRSTTIME("AunnBoughtHeadpiece", 1), "给阿吽买了帽子")
CALL K120_PRINT_ACHIEVEMENT_STATE(!FIRSTTIME("AunnKourindouFindsPolaroidCamera", 1), "与阿吽一起拍了照片")
;(当前停用) CALL K120_PRINT_ACHIEVEMENT_STATE(!FIRSTTIME("AunnMeetsMysteryCoalSeller", 1) && !FIRSTTIME("AunnMeetsMysteryLieutenant", 1) && !FIRSTTIME("AunnMeetsMysteryBreadGirl", 1), "遇到了所有神秘陌生人")
CALL K120_PRINT_ACHIEVEMENT_STATE(!FIRSTTIME("AunnFishingCaughtDriftwood", 1), "一起钓到了漂流木")
CALL K120_PRINT_ACHIEVEMENT_STATE(!FIRSTTIME("AunnFindsTheTwoPiece", 1), "成功潜入月之都并找到了『Two Piece』")
CALL K120_PRINT_ACHIEVEMENT_STATE(!FIRSTTIME("AunnRoLFestivalDate", 1), "与阿吽一起参加了节日约会")
CALL K120_PRINT_ACHIEVEMENT_STATE(!TALENT:キス未経験, "共享了一个双方同意的吻")
CALL K120_PRINT_ACHIEVEMENT_STATE(TALENT:恋人, "成为了恋人")
CALL K120_PRINT_ACHIEVEMENT_STATE(CFLAG:子供人数 > 0, "拥有了孩子")
CALL K120_PRINT_ACHIEVEMENT_STATE(CFLAG:1004, "尽情抚摸毛茸茸的尾巴")
PRINTFORML 

;如果玩家分享了《东方红魔乡》或之后的异变知识，则显示人物进度。
IF CFLAG:1003 >= 6
    PRINTFORML 
    FONTBOLD
    PRINTFORML 【人物身份进度】
    FONTREGULAR
    PRINTFORM 　　● 当前章节： 
    CALL COLORMESSAGE(@"  Touhou %TOSTR(CFLAG:1003)%", CFLAG:1003 >= 18 ? C_GREEN # C_YELLOW, 1)
    PRINTFORM 　　● 已访问地点： 
    CALL COLORMESSAGE(@"%TOSTR(CFLAG:1002)%/13", CFLAG:1002 >= 13 ? C_GREEN # C_YELLOW, 1)
    PRINTFORML 
ENDIF

;显示结局是否可达或已达成
PRINTFORML 
FONTBOLD
PRINTFORML 【结局进度】
FONTREGULAR
IF !FIRSTTIME("AunnEndingAchievedVerTH18", 1)
    CALL COLORMESSAGE("　　结局已达成！", C_GREEN, 1)
ELSEIF K120_ENDING_POSSIBLE()
    PRINTFORM 　　结局可达性： 
    CALL COLORMESSAGE("Yes", C_YELLOW, 1)
ELSE
    PRINTFORM 　　结局可达性： 
    CALL COLORMESSAGE("Not yet", C_RED, 1)
ENDIF

RETURN 1

;--------------------------------------------------------
;K120_PRINT_ACHIEVEMENT_STATE
;处理打印给定成就状态逻辑的私有方法
;
;参数:
; - bool   ARG  -- 要写入状态的成就
; - string ARGS -- 成就达成时要打印的行
;
;返回：void（打印对话）
;--------------------------------------------------------
@K120_PRINT_ACHIEVEMENT_STATE(ARG, ARGS)
IF ARG
    PRINTFORML 　　● %ARGS%
ELSE
    PRINTFORML 　　● ?????????
ENDIF

;--------------------------------------------------------
;K120_RETURN_HAT_NAME
;从双语帽子名称返回所需字符串的内部方法（例如"hatNameEn_hatNameJp"）
;
;参数：
; - string ARGS -- 要拆分的帽子名称字符串
; - int    ARG  -- 0代表英文，1代表日文
;
;返回：给定语言的帽子名称
;--------------------------------------------------------
@K120_RETURN_HAT_NAME(ARGS, ARG)
#FUNCTIONS
#DIMS DYNAMIC HAT_NAMES_ARRAY, 2 ;包含分割为英文和日文版本的帽子名称的数组

SPLIT ARGS, "_", HAT_NAMES_ARRAY
RETURNF HAT_NAMES_ARRAY:ARG

;--------------------------------------------------------
;K120_BUY_AND_EQUIP_HAT
;内部方法，处理实际购买并装备所选帽子的操作。
;
;参数：
; - int    ARG  -- 所选帽子的价格
; - string ARGS -- 未分割的帽子名称
;
;返回值：无
;--------------------------------------------------------
@K120_BUY_AND_EQUIP_HAT(ARG, ARGS)
PRINTFORMDW 你为阿吽买了he %K120_RETURN_HAT_NAME(ARGS, 0)% 。
PRINTFORML 「%SPLIT_G("那顶看起来真不错！:你确定我可以拿这个吗？:哦～！这是给我的吗？:这绝对看起来很适合我！")%」
EQUIP:120:帽子 = CLOTHES_ID("帽子", K120_RETURN_HAT_NAME(ARGS, 1))
CFLAG:120:202 = CLOTHES_ID("帽子", K120_RETURN_HAT_NAME(ARGS, 1))
MONEY -= ARG

;--------------------------------------------------------
;K120_CALCULATE_FAVOR_GAIN
;计算并返回给定价格对应好感度增益的内部方法
;
;参数：
; - int ARG  -- 帽子的价格
;
;返回值：计算得到的好感度增益
;--------------------------------------------------------
@K120_HAT_CALCULATE_FAVOR_GAIN(ARG)
#函数
RETURNF ARG / 10

;--------------------------------------------------------
;K120_HAT_CALCULATE_TRUST_GAIN
;内部方法，用于计算并返回给定价格的信任度增益
;
;参数:
; - int ARG  -- 帽子的价格
;
;返回: 计算出的信任度增益
;--------------------------------------------------------
@K120_HAT_CALCULATE_TRUST_GAIN(ARG)
#FUNCTION
RETURNF ARG / 14

;--------------------------------------------------------
;K120_HAT_SHOP_HANDLER
;在帽子店中打印帽子选择的逻辑以及处理购买和浏览的方法
;LOCALS:1 - 4 = 帽子/缎带类型
;LOCAL:1 - 4 = 相应的价格
;
;参数:
; - int ARG -- 1 表示帽子，2 表示缎带
; - int ARG:1 -- 浏览总时间
;
;返回: void
;--------------------------------------------------------
@K120_HAT_SHOP_HANDLER(ARG, ARG:1)
#DIMS color, 4
#DIMS hatString, 4
#DIM price, 4
#DIM choice
#DIM totalMinutesBrowsing
#DIM FavorGain
#DIM 信任增加

;介绍文本
PRINTFORMDW 你走进商店，门铃叮铃作响。
CALL COLORMESSAGE("「Irashaimase!」", C_P_PURPLE, 1)
PRINTFORMDW 年轻的店员热情地迎接你。
$BROWSE_FOR_HEADGEAR
PRINTFORML 
CALL COLORMESSAGE(@"当前金钱：%DIGIT_GROUP(MONEY)%", C_YELLOW, 1)
PRINTFORMDL 你与阿吽一起浏览商店里的\@ RESULT == 1 ? 帽子 # 发带和头饰 \@。
PRINTFORML 

;构建4个带颜色和类型的选项+价格
FOR choice, 0, 4
    IF ARG == 1
        hatString:choice = %SPLIT_G("hat_帽子:hood_頭巾:eboshi_烏帽子:casquette_キャスケット:miso soup bowl_お椀:nightcap_ナイトキャップ:turban cap_ターバンキャップ:tokin_兜巾:straw hat_麦藁帽子:student cap_学帽")%
    ELSEIF ARG == 2
        hatString:choice = %SPLIT_G("hair ornament_髪飾り:ribbon_リボン:maid headpiece_ホワイトブリム:headband_カチューシャ:rabbit ear headband_兎耳ヘアーバンド:nurse cap_ナースキャップ:sports visor_サンバイザー")%
    ENDIF
    price:choice = RAND(100, 2000)
    ;显示选项
    PRINTFORMDL [ %TOSTR(choice)%] %SPLIT_G("红色:蓝色:黄色:橙色:绿色:紫色:棕色:白色:黑色:灰色:粉色:方格纹:波点纹")% %K120_RETURN_HAT_NAME(hatString:choice, 0)% - %TOSTR(price:choice)%￥
NEXT
PRINTFORMDL [ 4] 继续浏览（+10分钟）
PRINTFORMDL [ 5] 离开商店

DO
    INPUT
    SELECTCASE RESULT
        CASE 0
            IF price:0 > MONEY
                PRINTFORMDL 你没有足够的钱……
            ELSE
                CALL K120_BUY_AND_EQUIP_HAT(price:0, hatString:0)
                FavorGain = K120_HAT_CALCULATE_FAVOR_GAIN(price:0)
                TrustGain = K120_HAT_CALCULATE_TRUST_GAIN(price:0)
                BREAK
            ENDIF
        CASE 1
            IF price:1 > MONEY
                PRINTFORMDL 你的钱不够...
            ELSE
                CALL K120_BUY_AND_EQUIP_HAT(price:1, hatString:1)
                FavorGain = K120_HAT_CALCULATE_FAVOR_GAIN(price:1)
                TrustGain = K120_HAT_CALCULATE_TRUST_GAIN(price:1)
                BREAK
            ENDIF
        CASE 2
            IF price:2 > MONEY
                PRINTFORMDL 你没有足够的钱...
            ELSE
                CALL K120_BUY_AND_EQUIP_HAT(price:2, hatString:2)
                FavorGain = K120_HAT_CALCULATE_FAVOR_GAIN(price:2)
                TrustGain = K120_HAT_CALCULATE_TRUST_GAIN(price:2)
                BREAK
            ENDIF
        CASE 3
            IF price:3 > MONEY
                PRINTFORMDL 你没有足够的钱...
            ELSE
                CALL K120_BUY_AND_EQUIP_HAT(price:3, hatString:3)
                FavorGain = K120_HAT_CALCULATE_FAVOR_GAIN(price:3)
                TrustGain = K120_HAT_CALCULATE_TRUST_GAIN(price:3)
                BREAK
            ENDIF
        CASE 4
            IF totalMinutesBrowsing <= 60
                totalMinutesBrowsing += 10
                GOTO BROWSE_FOR_HEADGEAR
            ENDIF
            BREAK
        CASE 5
            BREAK
    ENDSELECT
LOOP 1

IF RESULT == 4
    ;时间已用完
    PRINTFORML 「我觉得我们找不到什么好东西……」
    PRINTFORMDW 阿吽看起来对浏览感到无聊，所以你暂时停了下来……
ELSEIF RESULT == 5
    ;选择了不购买任何东西就离开
    PRINTFORML 「哦，我们要走了吗？」
    PRINTFORMDW 你空手离开了商店。
    PRINTFORML 「看来那里没什么适合我的东西，啊……？」
    PRINTFORMDW 阿吽看起来有点失望……
ELSE
    ;选择了并成功购买了一顶帽子
    PRINTFORMDW 阿吽把它戴在头上，为你转了一圈。
    PRINTFORML 「怎么样，适合我吗？」
    PRINTFORMDW 你对她竖起了大拇指。
    PRINTFORMW 「嘿嘿～！非常感谢你送我这个！」
    IF TALENT:恋慕
        PRINTFORML 「我会永远珍惜这个的！」
        PRINTFORMDW 阿吽蹭着你的手臂。
    ELSE
        PRINTFORML 「我得确保给你点什么作为回报！」
    ENDIF
    PRINTFORMDW 你带着兴奋的阿吽离开了商店...
    CFLAG:好感度 += FavorGain
    CFLAG:信頼度 += TrustGain
    CALL COLORMESSAGE(@"Favor +%TOSTR(FavorGain)%!", C_YELLOW, 1)
    CALL COLORMESSAGE(@"Trust +%TOSTR(TrustGain)%!", C_YELLOW, 1)
    TIME += totalMinutesBrowsing
    CALLF FIRSTTIME("AunnBoughtHeadpiece")
ENDIF

;--------------------------------------------------------
;K120_SET_TWO_PIECE_EVENT_PROGRESS
;方法用于打印并设置两件套（月之都）事件进度 (CFLAG:1005)，基于给定的魔法字符串
;
;参数:
; - string ARGS -- 用于输出进度的魔法字符串: "positive" (+1), "none" (0), "negative" (-1)
;
;返回: void (打印对话)
;--------------------------------------------------------
@K120_SET_TWO_PIECE_EVENT_PROGRESS(ARGS)
SELECTCASE ARGS
    CASE "positive"
        CALL COLORMESSAGE("对月之都的探索取得了一些进展...", C_YELLOW, 2)
        CFLAG:1005 += 1
    CASE "none"
        CALL COLORMESSAGE("对月之都的探索没有取得进展...", C_AQUA, 2)
    CASE "negative"
        CALL COLORMESSAGE("在绘制首都地图的过程中失去了一些进展...", C_RED, 1)
        CFLAG:1005 -= 1
ENDSELECT